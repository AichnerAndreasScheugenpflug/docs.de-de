---
title: Schritte in der äußeren Schleife DevOps-Workflow für eine Docker-Anwendung
description: Lernen Sie die Schritte für die "äußere"Schleife des DevOps-Workflows
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 11/23/2018
ms.openlocfilehash: b75e9df1c31e8bcebcaa6d56336a6aa499d13e1d
ms.sourcegitcommit: 30e2fe5cc4165aa6dde7218ec80a13def3255e98
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/13/2019
ms.locfileid: "56220938"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="a3d1a-103">Schritte in der äußeren Schleife DevOps-Workflow für eine Docker-Anwendung</span><span class="sxs-lookup"><span data-stu-id="a3d1a-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="a3d1a-104">Abbildung 5 – 1 zeigt ein End-to-End-Darstellung der Schritte, die mit der äußeren Schleife DevOps-Workflow.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="a3d1a-105">Abbildung 5-1: Outer-Loop-DevOps-Workflow für Docker-Anwendungen mit Microsoft-tools</span><span class="sxs-lookup"><span data-stu-id="a3d1a-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="a3d1a-106">Nun sehen wir uns die einzelnen Schritte ausführlicher.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="a3d1a-107">Schritt 1: Innere Schleife-Entwicklungsworkflow</span><span class="sxs-lookup"><span data-stu-id="a3d1a-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="a3d1a-108">Dadurch werden ausführlich in Kapitel 4, aber Zusammenfassend lässt sich sagen, hier ist die äußere Schleife, dem Moment beginnt an dem ein Entwickler Code auf das Quellcodeverwaltungssystem (z. B. Git) initiieren von Aktionen für CI-Pipeline überträgt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-azure-devops-services-and-git"></a><span data-ttu-id="a3d1a-109">Schritt 2: Integration der Quellcodeverwaltung und Verwaltung mit Azure DevOps-Services und Git</span><span class="sxs-lookup"><span data-stu-id="a3d1a-109">Step 2: Source-Code Control integration and management with Azure DevOps Services and Git</span></span>

<span data-ttu-id="a3d1a-110">In diesem Schritt benötigen Sie ein Versionskontrollsystem eine konsolidierte Version des gesamten Codes, die von den anderen Entwicklern im Team zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="a3d1a-111">Auch wenn die quellcodeverwaltung (SCC) und der Quellcode-Management-Blut die meisten Entwickler beim Erstellen von Docker-Anwendungen in einer DevOps-Lebenszyklus durchlaufen scheint, ist es wichtig, hervorzuheben, dass Sie die Docker-Images mit der Anwendung nicht senden müssen direkt in der globalen Docker-Registrierung (z.B. Azure Container Registry oder Docker Hub) aus dem Computer des Entwicklers.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="a3d1a-112">Im Gegenteil, müssen der Docker-Images zur Freigabe in produktionsumgebungen bereitgestellte ausschließlich auf den Quellcode, der integriert wird erstellt werden, in Ihrem globalen Build oder die CI-Pipeline, die basierend auf Ihrem Quellcode-Repository (z. B. Git).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="a3d1a-113">Die lokalen Images, die durch die Entwickler selbst generiert sollte nur von den Entwicklern verwendet werden, wenn auf ihren eigenen Computern zu testen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="a3d1a-114">Daher ist es wichtig, dass die DevOps-Pipeline, die von dem SCC-Code aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="a3d1a-115">Azure DevOps-Services und Team Foundation Server unterstützt Git- und Team Foundation-Versionskontrolle.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-115">Azure DevOps Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="a3d1a-116">Sie können sie auswählen, und es für eine End-to-End-Erfahrung von Microsoft verwenden.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="a3d1a-117">Sie können jedoch auch können verwalten Ihren Code in externen Repositorys (z.B. GitHub, lokales Git-Repositorys oder Subversion) und immer noch in der Lage, eine Verbindung herstellen, und erhalten den Code als Ausgangspunkt für Ihre DevOps-CI-Pipeline.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-azure-devops-services-and-docker"></a><span data-ttu-id="a3d1a-118">Schritt 3: Erstellen, Continuous Integration, Integration, und Testen Sie mit Azure DevOps-Dienste und Docker</span><span class="sxs-lookup"><span data-stu-id="a3d1a-118">Step 3: Build, CI, Integrate, and Test with Azure DevOps Services and Docker</span></span>

<span data-ttu-id="a3d1a-119">CI hat als Standard für moderne Software testen und Bereitstellung entwickelt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="a3d1a-120">Die Docker-Lösung verwaltet eine klare Trennung von Bereichen zwischen der Entwicklungs- und Betriebsteams.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="a3d1a-121">Die Unveränderlichkeit von Docker-Images wird sichergestellt, eine wiederholbare Bereitstellung zwischen Was wurde entwickelt, über CI getestet und in der Produktion ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="a3d1a-122">Docker-Engine bereitgestellt wird, über die Developer-Laptops und Test-Infrastruktur sind die Container in verschiedenen Umgebungen portabel.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="a3d1a-123">Jetzt, nachdem Sie ein Versionskontrollsystem mit den richtigen Code gesendet haben, müssen Sie eine *Builddienst* wählen Sie den Code, und führen Sie den globalen Builds und Tests.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="a3d1a-124">Der interne Workflow für diesen Schritt (Continuous Integration, Build, test) wird zur Erstellung einer CI-Pipeline, die Ihr coderepository (Git, usw.), bestehend aus dem Buildserver (Azure DevOps-Dienste), Docker-Engine und eine Docker-Registrierung.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Azure DevOps Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="a3d1a-125">Sie können Azure DevOps-Dienste als Grundlage für Ihre Anwendungen erstellen und Festlegen der CI-Pipeline und zum Veröffentlichen der erstellten "Elementen" ein "artefaktrepository" Dies wird im nächsten Schritt beschrieben.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-125">You can use Azure DevOps Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="a3d1a-126">Mithilfe von Docker für die Bereitstellung, der die "finalen Artefakte", die bereitgestellt werden, werden Docker-Images mit Ihrer Anwendung oder Dienste darin eingebettet sind.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="a3d1a-127">Diese Images werden mithilfe von Push übertragen oder veröffentlicht in einer *Docker-Registrierung* (einem privaten Repository wie diejenigen, die Sie haben in Azure Container Registry-Instanz oder eine öffentliche wie Docker-Hub-Registrierung, die häufig für offiziellen Basisimages verwendet wird).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="a3d1a-128">Hier ist das grundlegende Konzept: Die CI-Pipeline werden gestartet: deaktiviert ein Commit mit einem SCC-Repository wie Git.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="a3d1a-129">Der Commit führt dazu, dass Azure DevOps-Dienste einen buildauftrag in einem Docker-Container ausgeführt werden soll, und nach erfolgreichem Abschluss dieses Auftrags per Push übertragen eines Docker-Images an die Docker-Registrierung, wie in Abbildung 5-2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-129">The commit will cause Azure DevOps Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="a3d1a-130">Abbildung 5 – 2: Die Schritte in CI</span><span class="sxs-lookup"><span data-stu-id="a3d1a-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="a3d1a-131">Hier sind die grundlegenden Schritte der CI-Workflow mit Docker und Azure DevOps-Dienste:</span><span class="sxs-lookup"><span data-stu-id="a3d1a-131">Here are the basic CI workflow steps with Docker and Azure DevOps Services:</span></span>

1.  <span data-ttu-id="a3d1a-132">Der Entwickler legt einen Commit mit einem SCC-Repository (Git/Azure DevOps-Services, GitHub usw.).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-132">The developer pushes a commit to an SCC repository (Git/Azure DevOps Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="a3d1a-133">Wenn Sie Azure DevOps-Dienste oder Git verwenden, ist CI integriert, was bedeutet, dass es so einfach wie das Auswählen eines Kontrollkästchens in der Azure DevOps-Dienste ist.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-133">If you're using Azure DevOps Services or Git, CI is built in, which means that it is as simple as selecting a check box in Azure DevOps Services.</span></span> <span data-ttu-id="a3d1a-134">Bei Verwendung von einem externen SCC (wie z.B. GitHub), eine *Webhook* benachrichtigt Azure DevOps-Dienste des Updates oder zu Git/GitHub übertragen wird.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-134">If you're using an external SCC (like GitHub), a *webhook* will notify Azure DevOps Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="a3d1a-135">Azure DevOps-Dienste, ruft SCC Repository, einschließlich der dockerfile-Datei, die das Bild als auch von der Anwendung und -Code beschreibt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-135">Azure DevOps Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="a3d1a-136">Azure DevOps-Dienste wird ein dockerimage erstellt und es mit einer Nummer bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-136">Azure DevOps Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="a3d1a-137">Azure DevOps-Dienste den Docker-Container im Docker-Host bereitgestellten instanziiert und führt die entsprechenden Tests.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-137">Azure DevOps Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="a3d1a-138">Wenn die Tests erfolgreich sind, das Bild wird zuerst die Bezeichnung erhalten, einen aussagekräftigen Namen, damit Sie wissen es ist ein "Verbürgtes Build" (z. B. "/ 1.0.0" oder eine beliebige andere Bezeichnung), und klicken Sie dann mithilfe von Push übertragen Sie an Ihre Docker-Registrierung (Docker-Hub, Azure Container Registry, DTR, usw.).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-azure-devops-services-and-the-docker-extension-for-azure-devops-services"></a><span data-ttu-id="a3d1a-139">Implementieren die CI-Pipeline mit Azure DevOps-Dienste und die Docker-Erweiterung für Azure DevOps-Dienste</span><span class="sxs-lookup"><span data-stu-id="a3d1a-139">Implementing the CI pipeline with Azure DevOps Services and the Docker extension for Azure DevOps Services</span></span>

<span data-ttu-id="a3d1a-140">Die [Azure DevOps-Dienste-Docker-Erweiterung](https://aka.ms/vstsdockerextension) Fügt eine Aufgabe auf Ihrem CI-Pipeline mit dem Sie können Docker-Images zu erstellen, Docker-Images an einen authentifizierten Docker-Registrierung per Push zu übertragen, führen Sie Docker-Images oder führen andere Vorgänge, die von Docker angeboten werden CLI.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-140">The [Azure DevOps Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="a3d1a-141">Es fügt auch eine Docker Compose-Aufgabe, die Sie verwenden können, erstellen, per Push übertragen, und führen Sie Docker-Anwendungen mit mehreren Containern, oder führen andere Vorgänge, die von der Docker Compose-CLI angeboten werden, wie in Abbildung 5-3 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="a3d1a-142">Abbildung 5 – 3: Die Docker-CI-Pipeline in Azure DevOps-Dienste</span><span class="sxs-lookup"><span data-stu-id="a3d1a-142">Figure 5-3: The Docker CI pipeline in Azure DevOps Services</span></span>

<span data-ttu-id="a3d1a-143">Die Docker-Erweiterung können Sie Dienstendpunkte für Docker-Hosts und -Container oder imageregistrierungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="a3d1a-144">Der Standardwert Aufgaben mit einem lokalen Docker-Host gegebenenfalls (Dies erfordert derzeit einen benutzerdefinierten Azure DevOps-Services-Agent); Andernfalls benötigen sie, dass Sie eine Docker-hostverbindung angeben.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-144">The tasks default to using a local Docker host if available (this currently requires a custom Azure DevOps Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="a3d1a-145">Aktionen, die mit einer Docker-Registrierung, z. B. mithilfe von Push übertragen ein Bild, authentifizierenden abhängig erfordern, dass Sie ein Docker-registrierungsverbindung angeben.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="a3d1a-146">Die Azure DevOps-Dienste-Docker-Erweiterung installiert die folgenden Komponenten in Ihrem Azure DevOps-Services-Konto an:</span><span class="sxs-lookup"><span data-stu-id="a3d1a-146">The Azure DevOps Services Docker extension installs the following components in your Azure DevOps Services account:</span></span>

-   <span data-ttu-id="a3d1a-147">Ein Dienstendpunkt, für die Verbindung mit einer Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="a3d1a-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="a3d1a-148">Ein Dienstendpunkt, für die Verbindung mit einem Docker-Container-Host</span><span class="sxs-lookup"><span data-stu-id="a3d1a-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="a3d1a-149">Ein Docker-Aufgabe, die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="a3d1a-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="a3d1a-150">Erstellen Sie ein image</span><span class="sxs-lookup"><span data-stu-id="a3d1a-150">Build an image</span></span>

-   <span data-ttu-id="a3d1a-151">Übertragen Sie ein Bild oder ein Repository mit einer Registrierung mithilfe von Push</span><span class="sxs-lookup"><span data-stu-id="a3d1a-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="a3d1a-152">Führen Sie ein Bild in einem container</span><span class="sxs-lookup"><span data-stu-id="a3d1a-152">Run an image in a container</span></span>

-   <span data-ttu-id="a3d1a-153">Führen Sie einen Docker-Befehl</span><span class="sxs-lookup"><span data-stu-id="a3d1a-153">Run a Docker command</span></span>

-   <span data-ttu-id="a3d1a-154">Eine Docker Compose-Aufgabe zum Ausführen eines Befehls Docker Compose</span><span class="sxs-lookup"><span data-stu-id="a3d1a-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="a3d1a-155">Bei diesen Aufgaben Azure DevOps-Dienste einen Build Linux-Docker-Host/VM bereitgestellt, in Azure und Ihrer bevorzugten Docker-Registrierung (Azure Container Registry, Docker-Hub, privaten Docker-DTR oder beliebige andere Docker-Registrierung) können Sie Ihre Docker-CI-Pipeline in Zusammenstellen einer sehr konsistente Weise.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-155">With these Azure DevOps Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="a3d1a-156">***Anforderungen:***</span><span class="sxs-lookup"><span data-stu-id="a3d1a-156">***Requirements:***</span></span>

-   <span data-ttu-id="a3d1a-157">Azure DevOps-Dienste oder für lokale Installationen, Team Foundation Server 2015 Update 3 oder höher.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-157">Azure DevOps Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="a3d1a-158">Ein Azure DevOps-Services-Agent, der die Docker-Binärdateien verfügt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-158">An Azure DevOps Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="a3d1a-159">Eine einfache Möglichkeit zum Erstellen dieser werden Docker verwenden, um einen Container basierend auf dem Azure DevOps-Services-Agent Docker-Image ausführen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-159">An easy way to create one of these is to use Docker to run a container based on the Azure DevOps Services agent Docker image.</span></span>

<span data-ttu-id="a3d1a-160">**Weitere Informationen** , lesen Weitere Informationen zum Zusammenstellen von einer Azure DevOps-Dienste-Docker-CI-pipeline und anzuzeigenden Exemplarische Vorgehensweisen finden Sie unter den folgenden Websites:</span><span class="sxs-lookup"><span data-stu-id="a3d1a-160">**More info** To read more about assembling a Azure DevOps Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="a3d1a-161">Ausführen eines Azure DevOps-Services-Agents als Docker-Container: [ https://hub.docker.com/r/\ Microsoft/Vsts-Agent /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="a3d1a-161">Running an Azure DevOps Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="a3d1a-162">Azure DevOps-Dienste-Docker-Erweiterung: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="a3d1a-162">Azure DevOps Services Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="a3d1a-163">Erstellen von .NET Core-Linux-Docker-Images mit Azure DevOps-Dienste: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="a3d1a-163">Building .NET Core Linux Docker images with Azure DevOps Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="a3d1a-164">Erstellen einen Linux-basierten Visual Studio Team Service-Buildcomputer mit Docker-Unterstützung: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="a3d1a-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="a3d1a-165">Integrieren Sie, testen Sie und überprüfen Sie die Docker-Anwendungen mit mehreren Containern</span><span class="sxs-lookup"><span data-stu-id="a3d1a-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="a3d1a-166">Die meisten Docker-Anwendungen in der Regel bestehen mehrere Container statt von einem einzelnen Container aus.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="a3d1a-167">Ein gutes Beispiel ist eine Microservices-orientierte Anwendung, die für die Sie einen Container pro Microservice haben würden.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="a3d1a-168">Aber auch ohne strikt befolgen die Muster der Microservices-Ansatz, es ist sehr wahrscheinlich, dass die Docker-Anwendung aus mehreren Containern oder Diensten bestehen würde.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="a3d1a-169">Aus diesem Grund müssen Sie nach dem Erstellen der Anwendungscontainer in der CI-Pipeline, auch bereitstellen, integrieren und Testen Sie die Anwendung als Ganzes mit allen ihren Container in einem Docker-Host Integration oder sogar in einen Testcluster, Ihre Container werden verteilt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="a3d1a-170">Wenn Sie einen einzelnen Host verwenden, können Sie Docker-Befehle wie Docker-compose-zum Erstellen und Bereitstellen von verknüpften Container zum Testen und überprüfen Sie die Docker-Umgebung in einem einzelnen virtuellen Computer.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="a3d1a-171">Aber wenn Sie mit einem orchestratorcluster wie DC/OS, Kubernetes oder Docker Swarm arbeiten, müssen Sie Ihre Container über einen anderen Mechanismus oder Orchestrator, je nach Ihrer ausgewählten Cluster-Auftragsplaner bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="a3d1a-172">Es folgen verschiedene Arten von Tests, die Sie für Docker-Container ausführen können:</span><span class="sxs-lookup"><span data-stu-id="a3d1a-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="a3d1a-173">Komponententests für Docker-Container</span><span class="sxs-lookup"><span data-stu-id="a3d1a-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="a3d1a-174">Testen die Gruppen von zusammenhängende oder microservices</span><span class="sxs-lookup"><span data-stu-id="a3d1a-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="a3d1a-175">Testen Sie in Produktion und "Canary Release"-Versionen</span><span class="sxs-lookup"><span data-stu-id="a3d1a-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="a3d1a-176">Der wichtigste Punkt ist, dass bei der Integration und Funktionstests ausgeführt werden, diese Tests von außerhalb der Container ausgeführt werden muss.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="a3d1a-177">Tests müssen nicht definiert und in die Container, die Sie bereitstellen, ausgeführt werden, da die Container für statische Bilder basieren, die genau wie sein soll, die Sie in der Produktion bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="a3d1a-178">Sehr möglich beim Testen von komplexeren Szenarien, wie Sie mehrere Cluster (test-Cluster, staging-Cluster und Produktionscluster) testing ist die Bilder in eine Registrierung zum Testen in verschiedenen Clustern zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="a3d1a-179">Schieben Sie das benutzerdefinierte Docker-Image in einer globalen Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="a3d1a-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="a3d1a-180">Nachdem der Docker-Images getestet und überprüft wurde, sollten Sie kennzeichnen und veröffentlichen Sie sie in Ihrer Docker-Registrierung.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="a3d1a-181">Die Docker-Registrierung ist eine wesentliche Komponente des Lebenszyklus von Docker-Anwendung, da sie die zentrale ist, in dem Sie den benutzerdefinierten Test (auch bekannt als "Verbürgtes Images") in QA-und produktionsumgebungen bereitgestellt werden gespeichert.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="a3d1a-182">Ähnlich wie Ihre "Source of Truth" von der Anwendungscode, der in Ihrer SCC-Repository (Git, usw.) gespeichert ist, wird die Docker-Registrierung Ihre "Source of Truth" für die binäre Anwendung oder die Bits für die Umgebungen QA- oder-produktionsumgebung bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="a3d1a-183">In der Regel sollten Sie Ihren privaten Repositorys für Ihre benutzerdefinierten Images in einem privaten Repository in Azure Container Registry-Instanz in eine lokale Registrierung wie Docker Trusted Registry oder in einer öffentlichen Cloud-Registrierung mit eingeschränktem Zugriff (z. B. haben Docker-Hub), müssen auch in diesem Fall ist Ihr Code nicht open-Source-Sie des Anbieters Sicherheit vertrauenswürdig.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="a3d1a-184">In beiden Fällen ist die Methode, die mit der Sie dies tun, sehr ähnlich und letztlich basiert auf der Docker-Push-Befehl, wie in Abbildung 5-4 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="a3d1a-185">Abbildung 5-4: Veröffentlichen von benutzerdefinierten Images in Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="a3d1a-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="a3d1a-186">Es gibt mehrere Angebote von Docker-Registrierungen von cloudanbietern wie Azure Container Registry, Amazon Web Services-Container-Registry, Google Container Registry-Instanz, Kai Registrierung und So weiter.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="a3d1a-187">Die Azure DevOps-Dienste-Docker-Erweiterung verwenden, können Sie einen Satz von Bereitstellen von Images von einer Datei "Docker-Compose.yml" mit mehreren Tags, an einer authentifizierten Docker-Registrierung (z.B. Azure Container Registry), definiert pushen, wie in Abbildung 5-5 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-187">Using the Azure DevOps Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="a3d1a-188">Abbildung 5-5: Mit Azure DevOps-Services zum Veröffentlichen von benutzerdefinierten Images an eine Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="a3d1a-188">Figure 5-5: Using Azure DevOps Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="a3d1a-189">**Weitere Informationen** Weitere Informationen über die Docker-Erweiterung für Azure DevOps-Dienste, wechseln Sie zu <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-189">**More info** To read more about the Docker extension for Azure DevOps Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="a3d1a-190">Wechseln Sie zu, um weitere Informationen zu Azure Container Registry <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="a3d1a-191">Schritt 4: CD bereitstellen</span><span class="sxs-lookup"><span data-stu-id="a3d1a-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="a3d1a-192">Die Unveränderlichkeit von Docker-Images wird sichergestellt, eine wiederholbare Bereitstellung mit Was wurde entwickelt, über CI getestet und in der Produktion ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="a3d1a-193">Nachdem Sie die Application-Docker-Images in Ihrer Docker-Registrierung (private oder öffentliche) veröffentlicht haben, können Sie sie bereitstellen, auf die mehrere Umgebungen, die möglicherweise (Produktion, QA, staging, usw.) aus Ihrer CD-Pipeline mithilfe von Azure DevOps-Dienste Pipeline-Aufgaben oder Release Management für Azure DevOps Services.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Azure DevOps Services pipeline tasks or Azure DevOps Services Release Management.</span></span>

<span data-ttu-id="a3d1a-194">Allerdings hängt an diesem Punkt welche Art von Docker-Anwendung, die Sie bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="a3d1a-195">Bereitstellen einer einfachen Anwendung (aus Komposition und Bereitstellung der Sicht) wie eine monolithische Anwendung umfasst einige Container oder Dienste und bereitgestellte wenigen Servern oder VMs unterscheidet sich von der Bereitstellung einer komplexeren Anwendung wie ein Microservices-orientierte Anwendung mit hyperskalierung-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="a3d1a-196">Diese beiden Szenarien werden in den folgenden Abschnitten erläutert.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="a3d1a-197">Bereitstellen von Docker-Anwendungen in mehrere Docker-Umgebungen erstellt</span><span class="sxs-lookup"><span data-stu-id="a3d1a-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="a3d1a-198">Sehen wir uns zunächst an, das weniger komplizierten-Szenario: um einfache Docker-Hosts (VMs oder Server) in einer einzigen Umgebung oder auf mehrere Umgebungen bereitstellen (Qualitätssicherung, Staging und Produktion).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="a3d1a-199">In diesem Szenario intern Ihrer CD-Pipeline können Docker-compose (aus Ihrer Azure DevOps-Dienste-Bereitstellungsaufgaben) zum Bereitstellen der Docker-Anwendungen mit einer entsprechenden Gruppe von Containern oder Diensten, wie in Abbildung 5-6 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-199">In this scenario, internally your CD pipeline can use docker-compose (from your Azure DevOps Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="a3d1a-200">Abbildung 5: 6: Bereitstellen von anwendungscontainern in einfachen Docker-Host-Umgebungen-Registrierung</span><span class="sxs-lookup"><span data-stu-id="a3d1a-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="a3d1a-201">Abbildung 5-7 hebt hervor, wie Sie Ihre Build-CI zu QA-/Test-Umgebungen über das Azure DevOps-Dienste verbinden können, indem Sie auf der Docker Compose im Dialogfeld Task hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Azure DevOps Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="a3d1a-202">Allerdings bei der Bereitstellung in Staging-oder produktionsumgebung Sie würde in der Regel verwenden Release Management-Funktionen, die Verarbeitung mehrerer Umgebungen (z. B. QA, Staging und Produktion).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="a3d1a-203">Wenn Sie zu einzelnen Docker-Hosts bereitstellen, ist das Azure DevOps-Dienste verwendet "Docker-Compose" Aufgabe (das ist das Aufrufen der Docker-compose-Befehl im Hintergrund).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-203">If you're deploying to single Docker hosts, it is using the Azure DevOps Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="a3d1a-204">Wenn Sie in Azure Container Service bereitstellen, wird die Docker-Bereitstellungsaufgabe verwendet wie im Abschnitt erläutert die folgende.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="a3d1a-205">Abbildung 5-7: Hinzufügen einer Docker Compose-Aufgabe in einer Pipeline für Azure DevOps-Dienste</span><span class="sxs-lookup"><span data-stu-id="a3d1a-205">Figure 5-7: Adding a Docker Compose task in a Azure DevOps Services pipeline</span></span>

<span data-ttu-id="a3d1a-206">Wenn Sie ein Release in Azure DevOps-Dienste erstellen, dauert es eine Reihe von Eingabe-Elemente.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-206">When you create a release in Azure DevOps Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="a3d1a-207">Diese sollen während der gesamten Lebensdauer des Releases unveränderlich sein, über mehrere Umgebungen hinweg.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="a3d1a-208">Wenn Sie Container einführen, identifizieren die Eingabe Artefakte Bilder in einer Registrierung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="a3d1a-209">Je nachdem, wie diese identifiziert sind werden sie nicht unbedingt bleibt während der Dauer von der Version der offensichtlichste Fall wird, wenn Sie auf "Myimage:latest" aus einer docker-Compose-Datei verweisen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="a3d1a-210">Die Docker-Erweiterung für Azure DevOps-Dienste bietet Ihnen, die Möglichkeit, Build-Artefakte zu generieren, die spezifischen Registrierungszeichenfolgen-Bild enthalten aufnimmt, die garantiert das gleiche Image binäre eindeutig zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-210">The Docker extension for Azure DevOps Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="a3d1a-211">Dies sind, was Sie wirklich als Eingabe für ein Release verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-azure-devops-services-release-management"></a><span data-ttu-id="a3d1a-212">Verwalten von Releases fest, die Docker-Umgebungen mithilfe von Release Management für Azure DevOps Services</span><span class="sxs-lookup"><span data-stu-id="a3d1a-212">Managing releases to Docker environments by using Azure DevOps Services Release Management</span></span>

<span data-ttu-id="a3d1a-213">Über das Azure DevOps-Services-Erweiterungen, Sie können ein neues Image zu erstellen, veröffentlichen es in einer Docker-Registrierung, führen Sie es auf Linux oder Windows-Hosts an und verwenden Sie Befehle wie Docker-compose-zum Bereitstellen von mehreren Containern als eine gesamte Anwendung, über das Azure DevOps Services Release Management-Funktionen, die für mehrere Umgebungen vorgesehen, wie in Abbildung 5-8 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-213">Through the Azure DevOps Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Azure DevOps Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="a3d1a-214">Abbildung 5-8: Konfigurieren von Azure DevOps-Dienste Docker Compose-Tasks in der Releaseverwaltung für Azure DevOps-Dienste</span><span class="sxs-lookup"><span data-stu-id="a3d1a-214">Figure 5-8: Configuring Azure DevOps Services Docker Compose tasks from Azure DevOps Services Release Management</span></span>

<span data-ttu-id="a3d1a-215">Beachten Sie, dass das Szenario in Abbildung 5-6 dargestellt und in Abbildung 5-8 implementiert, ziemlich einfach ist ist (es wird einfach Docker-Hosts und virtuellen Computern bereitgestellt und fallen in einem einzelnen Container oder eine Instanz pro Bild), und wahrscheinlich werden, nur für Entwicklungs- oder testumgebung sc verwendet sollte jedoch beibehalten. Enarios.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="a3d1a-216">In den meisten Unternehmen Produktionsszenarien soll hohe Verfügbarkeit (HA) verfügen und einfach zu verwaltende Skalierbarkeit von Lastenausgleich über mehrere Knoten, Servern und virtuellen Computern sowie "intelligent Failover" also, wenn ein Server oder den Knoten ein Fehler auftritt, seine Dienste und Container werden zu einem anderen Hostserver oder virtuellen Computer verschoben.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="a3d1a-217">In diesem Fall benötigen Sie erweiterte Technologien wie containercluster und orchestratoren Zeitplanungsmodule.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="a3d1a-218">Daher ist die Möglichkeit, die mit diesen Clustern bereitstellen, genau über die erweiterten Szenarios, die im nächsten Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="a3d1a-219">Bereitstellen von komplexen Docker-Anwendungen in Docker-Cluster (DC/OS, Kubernetes und Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="a3d1a-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="a3d1a-220">Die Art der verteilten Anwendungen erfordert die Compute-Ressourcen, die auch verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="a3d1a-221">Um-produktionsmandanten und Funktionen zu erhalten, benötigen Sie Funktionen, die hohen Skalierbarkeit bieten clustering und hohe Verfügbarkeit auf der Grundlage von in einem Pool zusammengefasste Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="a3d1a-222">Sie können Container manuell bereitstellen mit diesen Clustern von einem CLI-Tool, z. B. Docker Swarm (wie die Verwendung von [Docker-Dienst erstellen](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) oder eine Web-Benutzeroberfläche wie z. B. [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) für DC/OS-Cluster, aber Sie sollten zu reservieren, die nur zu Testzwecken punctual Bereitstellung oder zu Verwaltungszwecken wie dezentrale Skalierung oder Überwachungszwecken.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="a3d1a-223">Aus Sicht einer CD und Azure DevOps-Dienste insbesondere führen speziell vorgenommen Bereitstellungsaufgaben aus Ihren Release-Management für Azure DevOps-Services-Umgebungen Sie Ihre containeranwendungen in verteilten Cluster in Container bereitgestellt wird Dienst, wie in Abbildung 5-9 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-223">From a CD point of view, and Azure DevOps Services specifically, you can run specially made deployment tasks from your Azure DevOps Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="a3d1a-224">Abbildung 5-9: Bereitstellung von verteilten Anwendungen in Container Service</span><span class="sxs-lookup"><span data-stu-id="a3d1a-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="a3d1a-225">Zunächst bei der Bereitstellung in bestimmten Cluster oder orchestratoren verwenden üblicherweise bestimmte Bereitstellungsskripts und Mechanismen pro jeden Orchestrator (d. h. Mesosphere DC/OS oder Kubernetes haben verschiedene Mechanismen als Docker und Docker Sie Swarm) statt einfacher und leicht zu bedienende Docker-compose-Tool basierend auf der "Docker-Compose.yml"-Definitionsdatei.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="a3d1a-226">Dank der Microsoft Azure DevOps-Dienste Docker Deploy-Task, dargestellt in Abbildung 5 bis 10, Sie jedoch jetzt auch können Bereitstellen in DC/OS einfach mit der vertrauten Docker-compose.yml-Datei, da Microsoft diese "Übersetzung" für Sie ausführt (aus Ihrem Docker-compose.yml-Datei in andere Formate, die von DC/OS benötigt).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-226">However, thanks to the Microsoft Azure DevOps Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="a3d1a-227">Abbildung 5 bis 10: Hinzufügen der Docker-Deploy-Task, der Ressourcen-Manager-Umgebung</span><span class="sxs-lookup"><span data-stu-id="a3d1a-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="a3d1a-228">Abbildung 5-11 zeigt, wie Sie bearbeite die Aufgabe mit Docker bereitstellen können, und geben Sie den Zieltyp (Azure Container Service-DC/OS, in diesem Fall), Ihre Docker-Compose-Datei und die Docker-registrierungsverbindung (z.B. Azure Container Registry oder Docker Hub).</span><span class="sxs-lookup"><span data-stu-id="a3d1a-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="a3d1a-229">Dies ist, in dem die Aufgabe Ihre bereit zu verwendenden benutzerdefinierten Docker-Images als Container in DC/OS-Cluster bereitgestellt werden abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="a3d1a-230">Abbildung 5-11: Docker bereitstellen Aufgabe Definition bereitstellen, Azure Container Service DC/OS</span><span class="sxs-lookup"><span data-stu-id="a3d1a-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="a3d1a-231">**Weitere Informationen** Weitere Informationen finden Sie Informationen zu den CD-Pipeline mit Azure DevOps-Dienste und Docker auf den folgenden Websites:</span><span class="sxs-lookup"><span data-stu-id="a3d1a-231">**More info** To read more about the CD pipeline with Azure DevOps Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="a3d1a-232">Azure DevOps-Dienste-Erweiterung für Docker und Azure Container Service: [ https://aka.ms/\ Vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="a3d1a-232">Azure DevOps Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="a3d1a-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="a3d1a-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="a3d1a-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="a3d1a-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="a3d1a-235">Schritt 5: Ausführen und verwalten</span><span class="sxs-lookup"><span data-stu-id="a3d1a-235">Step 5: Run and manage</span></span>

<span data-ttu-id="a3d1a-236">Da ausführen und Verwalten von Anwendungen auf Enterprise für die Produktion ist ein Hauptthema in sich selbst und aufgrund der Art der Vorgänge und Personen, die auf dieser Ebene (IT-Betrieb) sowie den großen Bereich dieses Bereichs arbeiten, wir haben die aggregationsverarbeitung verwendet des gesamtes neben die Kapitel, erklärt es.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="a3d1a-237">Schritt 6: Überwachen und diagnostizieren</span><span class="sxs-lookup"><span data-stu-id="a3d1a-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="a3d1a-238">In diesem Thema wird auch im nächsten Kapitel behandelt, als Teil der Aufgaben, die IT-Vorgänge in Produktionssystemen; Sie ist jedoch wichtig, hervorzuheben, dass die Einblicke erhalten in diesem Schritt an das Entwicklungsteam feed müssen, damit die Anwendung ständig verbessert wird.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="a3d1a-239">Aus dieser Sicht ist es ebenfalls Teil des DevOps, obwohl die Tasks und Vorgänge in der Regel von ausgeführt werden IT.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="a3d1a-240">Sind Sie nur bei der Überwachung und Diagnose zu 100 Prozent in den Bereich von DevOps sind die Prozesse und Analysen, die vom Entwicklungsteam für Tests oder Beta-Umgebungen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="a3d1a-241">Dies erfolgt entweder durch das Durchführen von Auslastungstests oder einfach durch Überwachung, Beta- oder QA-Umgebungen, in denen die neuen Versionen Beta-Tester versuchen, sind.</span><span class="sxs-lookup"><span data-stu-id="a3d1a-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a3d1a-242">[Zurück](index.md)
>[Weiter](create-ci-cd-pipelines-azure-devops-services-aspnetcore-kubernetes.md)</span><span class="sxs-lookup"><span data-stu-id="a3d1a-242">[Previous](index.md)
[Next](create-ci-cd-pipelines-azure-devops-services-aspnetcore-kubernetes.md)</span></span>
